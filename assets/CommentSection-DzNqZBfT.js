import{d as q,c as x,o as r,w as a,a as d,f as c,az as u,g as n,i as G,j as _,b as t,e as l,bG as L,ay as o,aO as B,cr as w,F as S,av as D,n as T,as as H,u as O,aB as W,ar as E,aG as F,at as N,aH as z,bI as R}from"./index-CHWqN9gn.js";const J={key:0},K={__name:"ButtonLike",props:{initialLiked:{type:Boolean,default:!1},initialLikes:{type:Number,default:0}},setup(v){const C=v,f=q(C.initialLiked),y=q(C.initialLikes);function M(){f.value=!f.value,y.value+=f.value?1:-1}return(k,g)=>(r(),x(n,{variant:"text",density:"compact","prepend-icon":f.value?"custom:heart-active":"custom:heart",color:"quaternary",class:"like-btn",ripple:!1,onClick:M},{default:a(()=>[y.value>0?(r(),d("span",J,u(y.value),1)):c("",!0)]),_:1},8,["prepend-icon"]))}},P={class:"count"},Q={key:0,class:"comment-write"},X={class:"textarea-wrap"},Y={class:"comment-btns"},Z={key:1,class:"commentList"},h={key:0,class:"comment-write"},ee={class:"textarea-wrap"},te={class:"comment-btns"},le={key:1,class:"comment"},ae={class:"comment-id text-tertiary"},se={class:"context text-gray"},oe={class:"tools"},ie={class:"stamp"},ne={key:0,class:"comment-btns"},re={class:"textarea-wrap"},de={class:"comment-btns"},ue={key:0,class:"comment-write"},me={class:"textarea-wrap"},pe={class:"comment-btns"},ce={key:1,class:"comment"},ve={class:"comment-id text-tertiary"},fe={class:"context text-gray"},ye={class:"tools"},ke={class:"stamp"},ge={key:0,class:"comment-btns"},Ce={__name:"CommentSection",props:{comments:{type:Array,required:!0},writeShow:{type:Boolean,default:!1},message:{type:String,required:!0},replyMessage:{type:String,required:!0}},emits:["update:message","update:replyMessage","toggle-reply","cancel-edit","write-toggle"],setup(v,{emit:C}){const f=v,y=C,M=G("isDesktop"),k=q(!1),g=q(!1),m=_({get:()=>f.message||"",set:p=>y("update:message",p)}),$=_({get:()=>f.replyMessage,set:p=>y("update:replyMessage",p)}),U=()=>y("write-toggle"),I=p=>p.reduce((e,V)=>e+1+V.replies.length,0),j=_(()=>I(f.comments));return(p,e)=>{const V=K;return r(),d(S,null,[t(B,{class:"comment-title",align:"end"},{default:a(()=>[l("span",P,"댓글 "+u(j.value),1),t(L),v.writeShow?c("",!0):(r(),x(n,{key:0,color:"info",variant:"flat",ripple:!1,onClick:U},{default:a(()=>e[12]||(e[12]=[o(" 댓글작성 ")])),_:1}))]),_:1}),v.writeShow?(r(),d("div",Q,[l("div",X,[e[15]||(e[15]=l("div",{class:"comment-id"}," 김농협 ",-1)),t(w,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),variant:"solo",density:"compact",placeholder:"댓글을 남겨보세요.",maxlength:"500",rows:"1","auto-grow":"",flat:""},null,8,["modelValue"]),l("div",Y,[t(n,{variant:"text",density:"compact",color:"quaternary",ripple:!1,onClick:U},{default:a(()=>e[13]||(e[13]=[o(" 취소 ")])),_:1}),t(n,{variant:"text",density:"compact",color:"quaternary",ripple:!1,disabled:!m.value.trim()},{default:a(()=>e[14]||(e[14]=[o(" 등록 ")])),_:1},8,["disabled"])])])])):c("",!0),v.comments.length?(r(),d("div",Z,[(r(!0),d(S,null,D(v.comments,(s,A)=>(r(),d("div",{key:s.id,class:"commentList-item"},[l("div",{class:T(["comment-area",{mine:s.isMine}])},[s.editMode?(r(),d("div",h,[l("div",ee,[e[18]||(e[18]=l("div",{class:"comment-id"}," 김농협 ",-1)),t(w,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=i=>m.value=i),variant:"solo",density:"compact",placeholder:"댓글을 남겨보세요.",maxlength:"500",rows:"1","auto-grow":"",flat:""},null,8,["modelValue"]),l("div",te,[t(n,{variant:"text",density:"compact",color:"quaternary",ripple:!1,onClick:i=>p.$emit("cancel-edit",s)},{default:a(()=>e[16]||(e[16]=[o(" 취소 ")])),_:2},1032,["onClick"]),t(n,{variant:"text",density:"compact",color:"quaternary",disabled:!m.value.trim(),ripple:!1},{default:a(()=>e[17]||(e[17]=[o(" 등록 ")])),_:1},8,["disabled"])])])])):(r(),d("div",le,[t(B,{align:"center",class:"comment-top"},{default:a(()=>[l("div",ae,u(s.userId),1),t(L),s.isMine?c("",!0):(r(),x(n,{key:0,variant:"text",density:"compact",color:"quaternary",ripple:!1,onClick:e[2]||(e[2]=i=>k.value=!0)},{default:a(()=>e[19]||(e[19]=[o(" 신고하기 ")])),_:1}))]),_:2},1024),l("p",se,u(s.content),1),l("div",oe,[l("p",ie,[l("span",null,u(s.date),1),l("span",null,u(s.time),1)]),t(n,{variant:"text",density:"compact",color:"quaternary",ripple:!1,onClick:i=>p.$emit("toggle-reply",s)},{default:a(()=>e[20]||(e[20]=[o(" 답글쓰기 ")])),_:2},1032,["onClick"]),t(V,{"initial-liked":!1,"initial-likes":s.likes},null,8,["initial-likes"])]),s.isMine?(r(),d("div",ne,[t(n,{variant:"text",density:"compact",color:"quaternary",ripple:!1,onClick:i=>s.editMode=!0},{default:a(()=>e[21]||(e[21]=[o(" 수정 ")])),_:2},1032,["onClick"]),t(n,{variant:"text",density:"compact",color:"quaternary",ripple:!1},{default:a(()=>e[22]||(e[22]=[o(" 삭제 ")])),_:1})])):c("",!0)]))],2),s.replyMode?(r(),d("div",{key:0,class:T(["comment-write depth2",{mine:s.isMine}])},[l("div",re,[e[25]||(e[25]=l("div",{class:"comment-id"}," 김농협 ",-1)),t(w,{modelValue:$.value,"onUpdate:modelValue":e[3]||(e[3]=i=>$.value=i),variant:"solo",density:"compact",placeholder:"답글을 남겨보세요.",maxlength:"500",rows:"1","auto-grow":"",flat:""},null,8,["modelValue"]),l("div",de,[t(n,{variant:"text",density:"compact",color:"quaternary",ripple:!1,onClick:i=>s.replyMode=!1},{default:a(()=>e[23]||(e[23]=[o(" 취소 ")])),_:2},1032,["onClick"]),t(n,{variant:"text",density:"compact",color:"quaternary",disabled:!$.value.trim(),ripple:!1},{default:a(()=>e[24]||(e[24]=[o(" 등록 ")])),_:1},8,["disabled"])])])],2)):c("",!0),(r(!0),d(S,null,D(s.replies,i=>(r(),d("div",{key:i.id,class:T(["comment-area depth2",{mine:i.isMine}])},[i.editMode?(r(),d("div",ue,[l("div",me,[e[28]||(e[28]=l("div",{class:"comment-id"}," 김농협 ",-1)),t(w,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=b=>m.value=b),variant:"solo",density:"compact",placeholder:"댓글을 남겨보세요.",maxlength:"500",rows:"1","auto-grow":"",flat:""},null,8,["modelValue"]),l("div",pe,[t(n,{variant:"text",density:"compact",color:"quaternary",ripple:!1,onClick:b=>p.$emit("cancel-edit",i)},{default:a(()=>e[26]||(e[26]=[o(" 취소 ")])),_:2},1032,["onClick"]),t(n,{variant:"text",density:"compact",color:"quaternary",disabled:!m.value.trim(),ripple:!1},{default:a(()=>e[27]||(e[27]=[o(" 등록 ")])),_:1},8,["disabled"])])])])):(r(),d("div",ce,[t(B,{align:"center",class:"comment-top"},{default:a(()=>[l("div",ve,u(i.userId),1),t(L),i.isMine?c("",!0):(r(),x(n,{key:0,variant:"text",density:"compact",color:"quaternary",ripple:!1,onClick:e[5]||(e[5]=b=>g.value=!0)},{default:a(()=>e[29]||(e[29]=[o(" 신고하기 ")])),_:1}))]),_:2},1024),l("p",fe,u(i.content),1),l("div",ye,[l("p",ke,[l("span",null,u(i.date),1),l("span",null,u(i.stamp),1)]),t(V,{"initial-liked":!1,"initial-likes":i.likes||0},null,8,["initial-likes"])]),i.isMine?(r(),d("div",ge,[t(n,{variant:"text",density:"compact",color:"quaternary",ripple:!1,onClick:b=>i.editMode=!0},{default:a(()=>e[30]||(e[30]=[o(" 수정 ")])),_:2},1032,["onClick"]),t(n,{variant:"text",density:"compact",color:"quaternary",ripple:!1},{default:a(()=>e[31]||(e[31]=[o(" 삭제 ")])),_:1})])):c("",!0)]))],2))),128)),A<v.comments.length-1?(r(),x(H,{key:1,color:"secondary"})):c("",!0)]))),128))])):(r(),x(W,{key:2,text:"'등록된 댓글이 없습니다.",icon:"false","bg-color":"#FEFEFE",height:O(M)?"81":"59"},null,8,["height"])),t(R,{modelValue:k.value,"onUpdate:modelValue":e[8]||(e[8]=s=>k.value=s),class:"popup-sm"},{default:a(()=>[t(E,null,{default:a(()=>[t(F,null,{default:a(()=>[t(n,{icon:"custom:close",density:"comfortable",onClick:e[6]||(e[6]=s=>k.value=!1)})]),_:1}),t(N,null,{default:a(()=>e[32]||(e[32]=[l("strong",{class:"title-5-bd"},"신고완료",-1),l("p",{class:"text-4"},[o(" 댓글 신고완료 되었습니다."),l("br"),o(" 관리자가 검토 후"),l("br"),o("빠른 시간안에 처리하겠습니다. ")],-1)])),_:1}),t(z,null,{default:a(()=>[t(n,{color:"primary",size:"large",onClick:e[7]||(e[7]=s=>k.value=!1)},{default:a(()=>e[33]||(e[33]=[o(" 확인 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(R,{modelValue:g.value,"onUpdate:modelValue":e[11]||(e[11]=s=>g.value=s),class:"popup-sm"},{default:a(()=>[t(E,null,{default:a(()=>[t(F,null,{default:a(()=>[t(n,{icon:"custom:close",density:"comfortable",onClick:e[9]||(e[9]=s=>g.value=!1)})]),_:1}),t(N,null,{default:a(()=>e[34]||(e[34]=[l("strong",{class:"title-5-bd"},"신고완료",-1),l("p",{class:"text-4"},[o(" 이미 신고하신 댓글입니다."),l("br"),o(" 관리자가 검토 후"),l("br"),o("빠른 시간안에 처리하겠습니다. ")],-1)])),_:1}),t(z,null,{default:a(()=>[t(n,{color:"primary",size:"large",onClick:e[10]||(e[10]=s=>g.value=!1)},{default:a(()=>e[35]||(e[35]=[o(" 확인 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{K as _,Ce as a};
